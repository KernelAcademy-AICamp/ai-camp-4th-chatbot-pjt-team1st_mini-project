# 📱 박물관 챗봇 화면 정의서

## 현재 Stage 구조
- **Stage 1**: `select_chatbot` - 챗봇 선택
- **Stage 2**: `greeting` - 인사 (USER_TYPE, TOUR_CHECK 포함)
- **Stage 3**: `select_item` - 유물 선택
- **Stage 4**: `quiz` - 퀴즈
- **Stage 5**: `quiz_result` - 퀴즈 결과

---

## 네이밍 규칙

```
Stage_{단계}_{단계별 순서}_{분기}
```

예시: `Stage_4_1_2` = 4번째 Stage의 첫 번째 순서, 분기 처리 중 2번째 케이스

---

## 15개 Figma 화면 상세 정의

---

### Stage_1

| 항목 | 내용 |
|------|------|
| **Figma Link** | [node-id=370-2218](https://www.figma.com/design/u4yIW8mmb2Vb7NJ3S9GYZG/Beyond-Essential-II?node-id=370-2218&m=dev) |
| **화면 설명** | 앱 초기 화면으로, 사용자가 챗봇 탭에 진입하기 전 상태. 하단 네비게이션의 '챗봇' 아이콘이 비활성화 상태로 표시됨. |
| **매칭 Stage** | Stage 1 - 앱 진입점, 챗봇 선택 전 대기 화면 |
| **주요 UI 요소** | - 상단 헤더 (배경: #07364a, 높이: 103px)<br>- 서브 헤더 (배경: #e7eef7, "국립중앙박물관 스마트전시관")<br>- 하단 네비게이션 바 (5개 메뉴: 홈, 전시, AR 전시, 대표 누리집, 챗봇)<br>- 메시지 입력 필드 (비활성화 상태) |

---

### Stage_2_1

| 항목 | 내용 |
|------|------|
| **Figma Link** | [node-id=370-2288](https://www.figma.com/design/u4yIW8mmb2Vb7NJ3S9GYZG/Beyond-Essential-II?node-id=370-2288&m=dev) |
| **화면 설명** | 챗봇 "철수"가 사용자에게 인사를 하고, 퀴즈 서비스를 소개하는 화면. 연령대 선택을 유도하는 버튼이 표시됨. |
| **매칭 Stage** | Stage 2 - 첫 번째 순서, 인사 및 서비스 안내 |
| **주요 UI 요소** | - 봇 프로필 (철수, 28px 원형 아바타)<br>- 봇 메시지 버블 2개 (배경: #e7eef7, 테두리: 10px radius)<br>- "연령 선택하기" 액션 버튼 (흰색 배경, 둥근 pill 형태)<br>- 타임스탬프 ("14:35")<br>- 하단 챗봇 아이콘 pressed 상태 |

---

### Stage_2_2

| 항목 | 내용 |
|------|------|
| **Figma Link** | [node-id=370-2356](https://www.figma.com/design/u4yIW8mmb2Vb7NJ3S9GYZG/Beyond-Essential-II?node-id=370-2356&m=dev) |
| **화면 설명** | 사용자가 "초등학생"을 선택한 후, 챗봇이 전시 투어 목록에서 퀴즈 대상 투어를 선택하도록 안내하는 화면. |
| **매칭 Stage** | Stage 2 - 두 번째 순서, 사용자 유형(연령) 선택 후 투어 선택 |
| **주요 UI 요소** | - 사용자 메시지 버블 ("초등학생", 배경: #246beb, 흰색 텍스트, 우측 정렬)<br>- 봇 메시지 버블 (친근한 반말 말투)<br>- 전시 투어 카드 (흰색 배경, 둥근 12px radius, 테두리)<br>  - 투어 제목 ("4학년 2반 현장학습 유물 경로")<br>  - 유물 개수 표시 ("유물 10개")<br>  - "이 투어에서 유물 선택하기" 버튼 (배경: #f1f2f6)<br>  - "다른 투어 선택하기" 링크 (화살표 아이콘 포함) |

---

### Stage_2_3

| 항목 | 내용 |
|------|------|
| **Figma Link** | [node-id=370-2436](https://www.figma.com/design/u4yIW8mmb2Vb7NJ3S9GYZG/Beyond-Essential-II?node-id=370-2436&m=dev) |
| **화면 설명** | 사용자가 투어에서 유물을 선택 완료한 상태. 선택한 유물 개수를 확인하고 퀴즈를 시작할 준비가 된 화면. |
| **매칭 Stage** | Stage 2 - 세 번째 순서, 유물 선택 완료 확인 |
| **주요 UI 요소** | - 이전 대화 기록 (봇 인사, 연령 선택, 투어 선택)<br>- 사용자 메시지 ("총 N개 선택 완료", 배경: #246beb)<br>- 전시 투어 선택 카드 (동일한 카드 UI)<br>- 채팅 히스토리 스크롤 가능 |

---

### Stage_3_1

| 항목 | 내용 |
|------|------|
| **Figma Link** | [node-id=370-4282](https://www.figma.com/design/u4yIW8mmb2Vb7NJ3S9GYZG/Beyond-Essential-II?node-id=370-4282&m=dev) |
| **화면 설명** | 퀴즈가 시작되어 첫 번째 퀴즈 문제가 출제된 화면. 사용자에게 유물 관련 질문을 제시함. |
| **매칭 Stage** | Stage 3 - 첫 번째 순서, 유물 퀴즈 출제 |
| **주요 UI 요소** | - 봇 퀴즈 메시지 ("금동미륵보살반가사유상의 '반가사유'는 어떤 자세를 의미할까?")<br>- 사용자 답변 버블 ("두 다리를 꼬고 앉은 자세")<br>- 대화형 퀴즈 인터페이스<br>- 채팅 입력 필드 (활성화 상태) |

---

### Stage_3_2

| 항목 | 내용 |
|------|------|
| **Figma Link** | [node-id=370-2610](https://www.figma.com/design/u4yIW8mmb2Vb7NJ3S9GYZG/Beyond-Essential-II?node-id=370-2610&m=dev) |
| **화면 설명** | 퀴즈 오답 시 피드백 화면. 사용자의 틀린 답변에 대해 올바른 정보와 해설을 제공함. |
| **매칭 Stage** | Stage 3 - 두 번째 순서, 오답 피드백 분기 |
| **주요 UI 요소** | - 봇 피드백 메시지 (Bold: "❌ 아쉽지만 틀렸어")<br>- 정답 해설 메시지 버블<br>- 추가 질문 유도 메시지 ("궁금한 게 있으면 지금 바로 물어봐도 돼 😊")<br>- 다음 퀴즈 진행 안내 |

---

### Stage_3_3

| 항목 | 내용 |
|------|------|
| **Figma Link** | [node-id=370-2808](https://www.figma.com/design/u4yIW8mmb2Vb7NJ3S9GYZG/Beyond-Essential-II?node-id=370-2808&m=dev) |
| **화면 설명** | 퀴즈 정답 시 피드백 화면. 사용자의 정답에 대해 칭찬과 함께 추가 학습 정보를 제공함. |
| **매칭 Stage** | Stage 3 - 세 번째 순서, 정답 피드백 분기 |
| **주요 UI 요소** | - 봇 피드백 메시지 (Bold: "✅ 정답이야!")<br>- 정답 해설 메시지 (반가사유 자세 의미 설명)<br>- 추가 질문 유도 메시지<br>- 이모지 사용 (😊) |

---

### Stage_4_1_1

| 항목 | 내용 |
|------|------|
| **Figma Link** | [node-id=370-2901](https://www.figma.com/design/u4yIW8mmb2Vb7NJ3S9GYZG/Beyond-Essential-II?node-id=370-2901&m=dev) |
| **화면 설명** | 사용자가 추가 질문 없이 다음 퀴즈로 넘어가기를 선택한 상태. 다음 퀴즈 문제로 전환됨. |
| **매칭 Stage** | Stage 4 - 첫 번째 순서, 첫 번째 분기 (추가 질문 없음) |
| **주요 UI 요소** | - 사용자 응답 ("없어")<br>- 다음 퀴즈 문제 출제<br>- 연속적인 대화 흐름 표시<br>- 스크롤 가능한 채팅 히스토리 |

---

### Stage_4_1_2

| 항목 | 내용 |
|------|------|
| **Figma Link** | [node-id=370-3030](https://www.figma.com/design/u4yIW8mmb2Vb7NJ3S9GYZG/Beyond-Essential-II?node-id=370-3030&m=dev) |
| **화면 설명** | 사용자가 정답 후 유물에 대해 추가 질문을 한 상태. 챗봇이 질문에 답변함. |
| **매칭 Stage** | Stage 4 - 첫 번째 순서, 두 번째 분기 (추가 질문 있음) |
| **주요 UI 요소** | - 사용자 추가 질문 ("반가사유상은 누가 만들었어?")<br>- 봇 답변 메시지 (역사적 정보 제공)<br>- 연속 대화 인터페이스<br>- 다음 퀴즈 진행 안내 |

---

### Stage_4_2

| 항목 | 내용 |
|------|------|
| **Figma Link** | [node-id=370-3155](https://www.figma.com/design/u4yIW8mmb2Vb7NJ3S9GYZG/Beyond-Essential-II?node-id=370-3155&m=dev) |
| **화면 설명** | 퀴즈 진행 중간 화면. 여러 차례의 퀴즈-답변-피드백 사이클이 진행된 상태. |
| **매칭 Stage** | Stage 4 - 두 번째 순서, 퀴즈 중간 진행 |
| **주요 UI 요소** | - 다수의 퀴즈 Q&A 기록<br>- 정답/오답 피드백 누적<br>- 스크롤 가능한 긴 대화 기록<br>- 지속적인 퀴즈 진행 UI |

---

### Stage_4_3

| 항목 | 내용 |
|------|------|
| **Figma Link** | [node-id=370-3300](https://www.figma.com/design/u4yIW8mmb2Vb7NJ3S9GYZG/Beyond-Essential-II?node-id=370-3300&m=dev) |
| **화면 설명** | 퀴즈 정답 후 추가 질문을 유도하는 화면. 사용자가 궁금한 점을 물어보거나 다음으로 넘어갈 수 있음. |
| **매칭 Stage** | Stage 4 - 세 번째 순서, 정답 후 추가 학습 유도 |
| **주요 UI 요소** | - 정답 피드백 (✅ 정답이야!)<br>- 상세 해설 메시지<br>- 추가 질문 유도 메시지<br>- 다음 퀴즈 진행 안내 텍스트 |

---

### Stage_4_4_1

| 항목 | 내용 |
|------|------|
| **Figma Link** | [node-id=370-3446](https://www.figma.com/design/u4yIW8mmb2Vb7NJ3S9GYZG/Beyond-Essential-II?node-id=370-3446&m=dev) |
| **화면 설명** | 사용자가 "없어"라고 응답하여 추가 질문 없이 다음으로 진행하는 분기. |
| **매칭 Stage** | Stage 4 - 네 번째 순서, 첫 번째 분기 (추가 질문 거부) |
| **주요 UI 요소** | - 사용자 응답 ("없어", 배경: #246beb)<br>- 봇 응답 및 다음 퀴즈 전환<br>- 대화 흐름 연속성 유지 |

---

### Stage_4_4_2

| 항목 | 내용 |
|------|------|
| **Figma Link** | [node-id=370-3592](https://www.figma.com/design/u4yIW8mmb2Vb7NJ3S9GYZG/Beyond-Essential-II?node-id=370-3592&m=dev) |
| **화면 설명** | 사용자가 추가 질문을 한 상태. 챗봇이 유물에 대한 상세 정보를 제공한 후 다음 퀴즈 진행 안내. |
| **매칭 Stage** | Stage 4 - 네 번째 순서, 두 번째 분기 (추가 질문 응답) |
| **주요 UI 요소** | - 사용자 질문 메시지 ("반가사유상은 누가 만들었어?")<br>- 봇 상세 답변 (역사적 배경 설명)<br>- 추가 질문 유도 ("더 궁금한 게 있으면 나한테 더 물어봐줘~😊")<br>- 다음 퀴즈 진행 안내 |

---

### Stage_4_5

| 항목 | 내용 |
|------|------|
| **Figma Link** | [node-id=370-3751](https://www.figma.com/design/u4yIW8mmb2Vb7NJ3S9GYZG/Beyond-Essential-II?node-id=370-3751&m=dev) |
| **화면 설명** | 마지막 퀴즈 문제 후, 퀴즈 종료 옵션을 제공하는 화면. "퀴즈 종료하기" 버튼 표시. |
| **매칭 Stage** | Stage 4 - 다섯 번째 순서, 퀴즈 종료 분기점 |
| **주요 UI 요소** | - 정답 피드백 메시지<br>- 마지막 퀴즈 안내 ("퀴즈를 종료할게! 아래 버튼을 눌러서 퀴즈를 종료할 수도 있어.")<br>- **"퀴즈 종료하기" 액션 버튼** (흰색 배경, pill 형태, 테두리: #ccc)<br>- 추가 질문 유도 메시지 |

---

### Stage_5

| 항목 | 내용 |
|------|------|
| **Figma Link** | [node-id=370-3894](https://www.figma.com/design/u4yIW8mmb2Vb7NJ3S9GYZG/Beyond-Essential-II?node-id=370-3894&m=dev) |
| **화면 설명** | 퀴즈 완료 후 결과 요약 화면. 맞춘 문제 수와 격려 메시지를 표시하고, 다시 도전하기 옵션 제공. |
| **매칭 Stage** | Stage 5 - 최종 결과 화면, 재도전 옵션 |
| **주요 UI 요소** | - **퀴즈 결과 카드** (배경: #e7eef7, 높이: 201px)<br>  - 트로피 아이콘 + "퀴즈 완료!" 헤더<br>  - 결과 요약 박스 (흰색 배경, "4개 / 10개")<br>  - 격려 메시지 ("정말 잘했어~ 10문제 중 4문제나 맞췄네!")<br>  - **"다시 도전하기" 버튼** (배경: #246beb, 흰색 텍스트, 48px 높이)<br>- 이전 대화 히스토리 유지 |

---

## Stage 흐름 요약

```
Stage_1 (앱 진입)
    ↓
Stage_2_1 (인사/서비스 안내)
    ↓
Stage_2_2 (연령 선택 → 투어 선택)
    ↓
Stage_2_3 (유물 선택 완료)
    ↓
Stage_3_1 (퀴즈 출제)
    ↓
┌──────────────────────────┐
│  정답: Stage_3_3         │
│  오답: Stage_3_2         │
└──────────────────────────┘
    ↓
Stage_4_1~4_4 (퀴즈 반복)
    ↓
    ├─ 추가질문 없음: Stage_4_4_1
    └─ 추가질문 있음: Stage_4_4_2
    ↓
Stage_4_5 (마지막 퀴즈, 종료 버튼)
    ↓
Stage_5 (결과 요약, 다시 도전)
```

---

## Stage별 화면 매핑 요약

### Stage 1: select_chatbot
- Stage_1 (node-id=370-2218)

### Stage 2: greeting
- Stage_2_1 (node-id=370-2288) - 인사/서비스 안내
- Stage_2_2 (node-id=370-2356) - 연령 선택 후 투어 선택
- Stage_2_3 (node-id=370-2436) - 유물 선택 완료

### Stage 3: select_item (퀴즈 출제 및 피드백)
- Stage_3_1 (node-id=370-4282) - 퀴즈 출제
- Stage_3_2 (node-id=370-2610) - 오답 피드백
- Stage_3_3 (node-id=370-2808) - 정답 피드백

### Stage 4: quiz (퀴즈 진행)
- Stage_4_1_1 (node-id=370-2901) - 추가 질문 없음 분기
- Stage_4_1_2 (node-id=370-3030) - 추가 질문 있음 분기
- Stage_4_2 (node-id=370-3155) - 퀴즈 중간 진행
- Stage_4_3 (node-id=370-3300) - 정답 후 추가 학습 유도
- Stage_4_4_1 (node-id=370-3446) - 추가 질문 거부
- Stage_4_4_2 (node-id=370-3592) - 추가 질문 응답
- Stage_4_5 (node-id=370-3751) - 퀴즈 종료 버튼

### Stage 5: quiz_result
- Stage_5 (node-id=370-3894) - 결과 요약/다시 도전

---

## 🎨 공통 디자인 토큰

| 요소 | 값 |
|------|-----|
| **헤더 배경** | `#07364a` |
| **서브 헤더 배경** | `#e7eef7` |
| **봇 메시지 버블** | `#e7eef7` |
| **사용자 메시지 버블** | `#246beb` |
| **텍스트 (기본)** | `#333` |
| **텍스트 (보조)** | `#7a7a7a` |
| **폰트** | Pretendard |
| **액션 버튼 배경** | `#f1f2f6` |
| **액션 버튼 테두리** | `#ccc` |
| **화면 크기** | 393 x 852px (iPhone 14 기준) |

---

## 📝 주요 메시지 패턴

### 봇 메시지 구조
```
[철수 아바타] 철수  14:35
┌─────────────────────────────┐
│ 메시지 내용                  │
│ (배경: #e7eef7)              │
└─────────────────────────────┘
```

### 사용자 메시지 구조
```
                        14:35 ┌─────────────────┐
                              │ 메시지 내용      │
                              │ (배경: #246beb)  │
                              └─────────────────┘
```

### 액션 버튼 구조
```
┌────────────────────────────┐
│ 버튼 텍스트 (pill 형태)     │
│ (흰색 배경, #ccc 테두리)    │
└────────────────────────────┘
```
