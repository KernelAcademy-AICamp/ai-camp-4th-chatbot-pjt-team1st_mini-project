"""
ğŸ“š artifacts.py - ìœ ë¬¼ ë°ì´í„°
==============================

ìœ ë¬¼ ì •ë³´ë¥¼ ì¶”ê°€/ìˆ˜ì •í•˜ëŠ” íŒŒì¼ì…ë‹ˆë‹¤.
ìƒˆ ìœ ë¬¼ì„ ì¶”ê°€í•˜ë ¤ë©´ ARTIFACTS ë”•ì…”ë„ˆë¦¬ì— ì¶”ê°€í•˜ì„¸ìš”.
"""
from typing import Optional, List

# ============================================================
# ğŸ“œ ìœ ë¬¼ ë°ì´í„°ë² ì´ìŠ¤
# ============================================================

ARTIFACTS = {
    "ê¸ˆë™ë¯¸ë¥µë³´ì‚´ë°˜ê°€ì‚¬ìœ ìƒ": {
        "id": "NMK-001",
        "name": "ê¸ˆë™ë¯¸ë¥µë³´ì‚´ë°˜ê°€ì‚¬ìœ ìƒ",
        "name_en": "Gilt-bronze Pensive Maitreya Bodhisattva",
        "name_zh": "é‡‘é“œå¼¥å‹’è©è¨åŠè·æ€æƒŸåƒ",
        "name_ja": "é‡‘éŠ…å¼¥å‹’è©è–©åŠè·æ€æƒŸåƒ",
        "period": "ì‚¼êµ­ì‹œëŒ€ (6-7ì„¸ê¸°)",
        "material": "ê¸ˆë™ (ì²­ë™ì— ê¸ˆë„ê¸ˆ)",
        "dimensions": "ë†’ì´ 93.5cm",
        "location": "êµ­ë¦½ì¤‘ì•™ë°•ë¬¼ê´€ 3ì¸µ ë¶ˆêµì¡°ê°ì‹¤",
        "designation": "êµ­ë³´ ì œ83í˜¸",
        "description": """í•œìª½ ë‹¤ë¦¬ë¥¼ ë‹¤ë¥¸ ìª½ ë¬´ë¦ ìœ„ì— ì˜¬ë¦¬ê³ , ì†ê°€ë½ì„ ëº¨ì— ëŒ„ ì±„ ê¹Šì€ ìƒê°ì— ì ê¸´ ëª¨ìŠµì˜ ë³´ì‚´ìƒì…ë‹ˆë‹¤. 
ë¯¸ë¥µë³´ì‚´ì´ ë„ì†”ì²œì—ì„œ ì¤‘ìƒì„ ì–´ë–»ê²Œ êµ¬ì œí•  ê²ƒì¸ì§€ ì‚¬ìœ í•˜ëŠ” ëª¨ìŠµì„ í‘œí˜„í•œ ê²ƒìœ¼ë¡œ, 
ì‚¼êµ­ì‹œëŒ€ ë¶ˆêµ ì¡°ê°ì˜ ìµœê³  ê±¸ì‘ìœ¼ë¡œ í‰ê°€ë°›ìŠµë‹ˆë‹¤.
ë¶€ë“œëŸ¬ìš´ ë¯¸ì†Œì™€ ìì—°ìŠ¤ëŸ¬ìš´ ì‹ ì²´ ë¹„ë¡€, ì„¬ì„¸í•œ ì˜· ì£¼ë¦„ í‘œí˜„ì´ íŠ¹ì§•ì…ë‹ˆë‹¤.""",
        "fun_facts": [
            "êµ­ë³´ ì œ83í˜¸ë¡œ ì§€ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.",
            "ì¼ë³¸ êµí†  ê³ ë¥˜ì§€(å»£éš†å¯º)ì˜ ëª©ì¡°ë°˜ê°€ì‚¬ìœ ìƒê³¼ ë§¤ìš° ìœ ì‚¬í•©ë‹ˆë‹¤.",
            "ë†’ì´ëŠ” ì•½ 93.5cmì…ë‹ˆë‹¤.",
            "ì–¼êµ´ì— ë¤ ì‹ ë¹„ë¡œìš´ ë¯¸ì†Œê°€ íŠ¹íˆ ìœ ëª…í•©ë‹ˆë‹¤."
        ],
        "keywords": ["ë¯¸ë¥µ", "ë°˜ê°€ì‚¬ìœ ", "ê¸ˆë™", "ë³´ì‚´", "ì‚¼êµ­ì‹œëŒ€", "êµ­ë³´", "ë¶ˆìƒ"]
    },
    
    "ë°±ì œê¸ˆë™ëŒ€í–¥ë¡œ": {
        "id": "NMK-002",
        "name": "ë°±ì œê¸ˆë™ëŒ€í–¥ë¡œ",
        "name_en": "Baekje Gilt-bronze Incense Burner",
        "name_zh": "ç™¾æµé‡‘é“œå¤§é¦™ç‚‰",
        "name_ja": "ç™¾æ¸ˆé‡‘éŠ…å¤§é¦™ç‚‰",
        "period": "ë°±ì œ (6-7ì„¸ê¸°)",
        "material": "ê¸ˆë™",
        "dimensions": "ë†’ì´ 61.8cm",
        "location": "êµ­ë¦½ë¶€ì—¬ë°•ë¬¼ê´€",
        "designation": "êµ­ë³´ ì œ287í˜¸",
        "description": """ë°±ì œì˜ ë›°ì–´ë‚œ ê¸ˆì† ê³µì˜ˆ ê¸°ìˆ ì„ ë³´ì—¬ì£¼ëŠ” ëŒ€í‘œì ì¸ ìœ ë¬¼ì…ë‹ˆë‹¤.
ìš©ì´ ì—°ê½ƒì„ ë¬¼ê³  ìˆëŠ” ë°›ì¹¨ëŒ€ ìœ„ì— ì‚°ì•…ì„ í˜•ìƒí™”í•œ ëšœê»‘ì´ ì˜¬ë ¤ì ¸ ìˆìœ¼ë©°,
ëšœê»‘ ê¼­ëŒ€ê¸°ì—ëŠ” ë´‰í™©ì´ ìˆìŠµë‹ˆë‹¤.
ë„êµ, ë¶ˆêµ, ì‹ ì„  ì‚¬ìƒì´ ìœµí•©ëœ ë°±ì œì¸ì˜ ì •ì‹ ì„¸ê³„ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
í–¥ì„ í”¼ìš°ë©´ ì—°ê¸°ê°€ ì‚° ì‚¬ì´ë¡œ í”¼ì–´ì˜¤ë¥´ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.""",
        "fun_facts": [
            "1993ë…„ ì¶©ë‚¨ ë¶€ì—¬ ëŠ¥ì‚°ë¦¬ ì ˆí„°ì—ì„œ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.",
            "1,400ë…„ ë§Œì— ì„¸ìƒì— ëª¨ìŠµì„ ë“œëŸ¬ëƒˆìŠµë‹ˆë‹¤.",
            "êµ­ë³´ ì œ287í˜¸ì…ë‹ˆë‹¤.",
            "ëšœê»‘ì—ëŠ” 74ê°œì˜ ì‚°ë´‰ìš°ë¦¬ì™€ ì‹ ì„ , ë™ë¬¼ë“¤ì´ ìƒˆê²¨ì ¸ ìˆìŠµë‹ˆë‹¤."
        ],
        "keywords": ["ë°±ì œ", "í–¥ë¡œ", "ê¸ˆë™", "ë´‰í™©", "ìš©", "ë¶€ì—¬", "ì‹ ì„ "]
    },
    
    "ì‹ ë¼ê¸ˆê´€": {
        "id": "NMK-003",
        "name": "ì‹ ë¼ ê¸ˆê´€ (ê¸ˆê´€ì´ ì¶œí† )",
        "name_en": "Silla Gold Crown from Geumgwanchong",
        "name_zh": "æ–°ç½—é‡‘å† ",
        "name_ja": "æ–°ç¾…é‡‘å† ",
        "period": "ì‹ ë¼ (5-6ì„¸ê¸°)",
        "material": "ê¸ˆ, ì˜¥",
        "dimensions": "ë†’ì´ 44cm",
        "location": "êµ­ë¦½ì¤‘ì•™ë°•ë¬¼ê´€",
        "designation": "êµ­ë³´ ì œ87í˜¸",
        "description": """ì‹ ë¼ ì™•ì¡±ì˜ ê¶Œìœ„ë¥¼ ìƒì§•í•˜ëŠ” ê¸ˆê´€ì…ë‹ˆë‹¤.
ë‚˜ë­‡ê°€ì§€ ëª¨ì–‘(å‡ºìí˜•)ê³¼ ì‚¬ìŠ´ë¿” ëª¨ì–‘ì˜ ì„¸ì›€ ì¥ì‹ì´ íŠ¹ì§•ì´ë©°,
ìˆ˜ë§ì€ ê³±ì€ì˜¥(æ›²ç‰)ê³¼ ë‹¬ê°œ ì¥ì‹ì´ ë‹¬ë ¤ ìˆìŠµë‹ˆë‹¤.
ì‹œë² ë¦¬ì•„ ìƒ¤ë¨¸ë‹ˆì¦˜ì˜ ì˜í–¥ì„ ë°›ì€ ê²ƒìœ¼ë¡œ ì¶”ì •ë˜ë©°,
ì‹ ë¼ì˜ ë…ìì ì¸ ê¸ˆì† ê³µì˜ˆ ê¸°ìˆ ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.""",
        "fun_facts": [
            "ì‹ ë¼ì—ì„œ ì´ 6ì ì˜ ê¸ˆê´€ì´ ì¶œí† ë˜ì—ˆìŠµë‹ˆë‹¤.",
            "ì„¸ê³„ì—ì„œ ê°€ì¥ ë§ì€ ê¸ˆê´€ì´ ë°œê²¬ëœ ë‚˜ë¼ì˜ ìœ ë¬¼ì…ë‹ˆë‹¤.",
            "ê¸ˆê´€ì´, ì„œë´‰ì´, ì²œë§ˆì´ ë“±ì—ì„œ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.",
            "ë‚˜ë­‡ê°€ì§€ì™€ ì‚¬ìŠ´ë¿” ëª¨ì–‘ì€ í•˜ëŠ˜ê³¼ ë•…ì„ ì—°ê²°í•˜ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤."
        ],
        "keywords": ["ì‹ ë¼", "ê¸ˆê´€", "ê²½ì£¼", "ì™•ê´€", "ê¸ˆ", "ì˜¥", "êµ­ë³´"]
    },
    
    "ì²­ììƒê°ìš´í•™ë¬¸ë§¤ë³‘": {
        "id": "NMK-004",
        "name": "ì²­ì ìƒê°ìš´í•™ë¬¸ ë§¤ë³‘",
        "name_en": "Celadon Maebyeong with Inlaid Cloud and Crane Design",
        "name_zh": "é’ç“·é•¶åµŒäº‘é¹¤çº¹æ¢…ç“¶",
        "name_ja": "é’ç£è±¡åµŒé›²é¶´æ–‡æ¢…ç“¶",
        "period": "ê³ ë ¤ (12ì„¸ê¸°)",
        "material": "ì²­ì",
        "dimensions": "ë†’ì´ 42.1cm",
        "location": "êµ­ë¦½ì¤‘ì•™ë°•ë¬¼ê´€ 2ì¸µ",
        "designation": "êµ­ë³´ ì œ68í˜¸",
        "description": """ê³ ë ¤ì‹œëŒ€ë¥¼ ëŒ€í‘œí•˜ëŠ” ìƒê°ì²­ìì…ë‹ˆë‹¤.
ë¹„ì·¨ìƒ‰ì˜ ìœ ì•½ ìœ„ì— í°ìƒ‰ê³¼ ê²€ì€ìƒ‰ìœ¼ë¡œ êµ¬ë¦„ê³¼ í•™ ë¬´ëŠ¬ë¥¼ ìƒê° ê¸°ë²•ìœ¼ë¡œ ì¥ì‹í–ˆìŠµë‹ˆë‹¤.
ìš°ì•„í•œ ê³¡ì„ ì˜ ë§¤ë³‘ í˜•íƒœì™€ ì •êµí•œ ìƒê° ë¬´ëŠ¬ê°€ ì–´ìš°ëŸ¬ì ¸ ê³ ë ¤ ë„ìê¸°ì˜ ì •ìˆ˜ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
ìƒê° ê¸°ë²•ì€ í‘œë©´ì„ íŒŒë‚¸ í›„ ë‹¤ë¥¸ ìƒ‰ì˜ í™ì„ ì±„ì›Œ ë„£ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤.""",
        "fun_facts": [
            "ìƒê° ê¸°ë²•ì€ ê³ ë ¤ì—ì„œ ë…ìì ìœ¼ë¡œ ë°œì „ì‹œí‚¨ ê¸°ìˆ ì…ë‹ˆë‹¤.",
            "ì¤‘êµ­ ì†¡ë‚˜ë¼ì—ì„œë„ ê³ ë ¤ì²­ìë¥¼ 'ì²œí•˜ì œì¼'ì´ë¼ í‰ê°€í–ˆìŠµë‹ˆë‹¤.",
            "êµ­ë³´ ì œ68í˜¸ì…ë‹ˆë‹¤.",
            "ë§¤ë³‘ì€ ìˆ ì´ë‚˜ ë¬¼ì„ ë‹´ëŠ” ìš©ë„ë¡œ ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤."
        ],
        "keywords": ["ê³ ë ¤", "ì²­ì", "ìƒê°", "ë§¤ë³‘", "ìš´í•™ë¬¸", "ë„ìê¸°"]
    },
    
    "í›ˆë¯¼ì •ìŒí•´ë¡€ë³¸": {
        "id": "NMK-005",
        "name": "í›ˆë¯¼ì •ìŒ í•´ë¡€ë³¸",
        "name_en": "Hunminjeongeum Haeryebon",
        "name_zh": "è®­æ°‘æ­£éŸ³è§£ä¾‹æœ¬",
        "name_ja": "è¨“æ°‘æ­£éŸ³è§£ä¾‹æœ¬",
        "period": "ì¡°ì„  (1446ë…„)",
        "material": "ì¢…ì´ (ëª©íŒ ì¸ì‡„)",
        "dimensions": "ì„¸ë¡œ 32.3cm",
        "location": "ê°„ì†¡ë¯¸ìˆ ê´€",
        "designation": "êµ­ë³´ ì œ70í˜¸, ìœ ë„¤ìŠ¤ì½” ì„¸ê³„ê¸°ë¡ìœ ì‚°",
        "description": """ì„¸ì¢…ëŒ€ì™•ì´ ì°½ì œí•œ í•œê¸€ì˜ ì›ë¦¬ì™€ ì‚¬ìš©ë²•ì„ ì„¤ëª…í•œ ì±…ì…ë‹ˆë‹¤.
í•œê¸€ ì°½ì œì˜ ëª©ì , ê° ê¸€ìì˜ ì œì ì›ë¦¬, ë°œìŒë²• ë“±ì´ ìƒì„¸íˆ ê¸°ë¡ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
'í›ˆë¯¼ì •ìŒ'ì´ë¼ëŠ” ì´ë¦„ì€ 'ë°±ì„±ì„ ê°€ë¥´ì¹˜ëŠ” ë°”ë¥¸ ì†Œë¦¬'ë¼ëŠ” ëœ»ì…ë‹ˆë‹¤.
ì„¸ê³„ì—ì„œ ìœ ì¼í•˜ê²Œ ì°½ì œ ì›ë¦¬ê°€ ë°í˜€ì§„ ë¬¸ìì…ë‹ˆë‹¤.""",
        "fun_facts": [
            "1997ë…„ ìœ ë„¤ìŠ¤ì½” ì„¸ê³„ê¸°ë¡ìœ ì‚°ìœ¼ë¡œ ë“±ì¬ë˜ì—ˆìŠµë‹ˆë‹¤.",
            "êµ­ë³´ ì œ70í˜¸ì…ë‹ˆë‹¤.",
            "í˜„ì¬ ê°„ì†¡ë¯¸ìˆ ê´€ì— ìœ ì¼ë³¸ì´ ì†Œì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤.",
            "1940ë…„ ê²½ìƒë¶ë„ ì•ˆë™ì—ì„œ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤."
        ],
        "keywords": ["í›ˆë¯¼ì •ìŒ", "í•œê¸€", "ì„¸ì¢…", "ì¡°ì„ ", "í•´ë¡€ë³¸", "ì„¸ê³„ê¸°ë¡ìœ ì‚°"]
    }
}


# ============================================================
# ğŸ” ìœ ë¬¼ ê²€ìƒ‰ í•¨ìˆ˜
# ============================================================

def find_artifact(text: str) -> Optional[dict]:
    """í…ìŠ¤íŠ¸ì—ì„œ ìœ ë¬¼ì„ ì°¾ìŠµë‹ˆë‹¤."""
    if not text:
        return None
    
    text_lower = text.lower()
    
    for key, artifact in ARTIFACTS.items():
        # ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰ (í•œêµ­ì–´)
        if key in text or artifact["name"] in text:
            return artifact
        
        # ì˜ë¬¸ëª…ìœ¼ë¡œ ê²€ìƒ‰
        if artifact["name_en"].lower() in text_lower:
            return artifact
        
        # í‚¤ì›Œë“œ ë§¤ì¹­ (2ê°œ ì´ìƒ)
        matched_keywords = sum(1 for kw in artifact["keywords"] if kw in text)
        if matched_keywords >= 2:
            return artifact
    
    return None


def get_artifact_list() -> list:
    """ìœ ë¬¼ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤."""
    return list(ARTIFACTS.keys())


def get_artifact_by_id(artifact_id: str) -> Optional[dict]:
    """IDë¡œ ìœ ë¬¼ì„ ì°¾ìŠµë‹ˆë‹¤."""
    for artifact in ARTIFACTS.values():
        if artifact.get("id") == artifact_id:
            return artifact
    return None
